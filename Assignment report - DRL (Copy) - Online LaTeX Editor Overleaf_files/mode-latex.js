ace.define("ace/mode/latex_highlight_rules",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,a=function(){this.$rules={start:[{token:"comment",regex:"%.*$"},{token:["keyword","lparen","variable.parameter","rparen","lparen","storage.type","rparen"],regex:"(\\\\(?:documentclass|usepackage|input))(?:(\\[)([^\\]]*)(\\]))?({)([^}]*)(})"},{token:["keyword","lparen","variable.parameter","rparen"],regex:"(\\\\(?:label|(?:eq|page|v|c|C)?ref|cite(?:[^{]*)))(?:({)([^}]*)(}))?"},{token:["storage.type","lparen","variable.parameter","rparen"],regex:"(\\\\begin)({)(verbatim)(})",next:"verbatim"},{token:["storage.type","lparen","variable.parameter","rparen"],regex:"(\\\\begin)({)(lstlisting)(})",next:"lstlisting"},{token:["storage.type","lparen","variable.parameter","rparen"],regex:"(\\\\(?:begin|end))({)([\\w*]*)(})"},{token:"storage.type",regex:/\\verb\b\*?/,next:[{token:["keyword.operator","string","keyword.operator"],regex:"(.)(.*?)(\\1|$)|",next:"start"}]},{token:"storage.type",regex:"\\\\[a-zA-Z]+"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"constant.character.escape",regex:"\\\\[^a-zA-Z]?"},{token:"string",regex:"\\${1,2}",next:"equation"}],equation:[{token:"comment",regex:"%.*$"},{token:"string",regex:"\\${1,2}",next:"start"},{token:"constant.character.escape",regex:"\\\\(?:[^a-zA-Z]|[a-zA-Z]+)"},{token:"error",regex:"^\\s*$",next:"start"},{defaultToken:"string"}],verbatim:[{token:["storage.type","lparen","variable.parameter","rparen"],regex:"(\\\\end)({)(verbatim)(})",next:"start"},{defaultToken:"text"}],lstlisting:[{token:["storage.type","lparen","variable.parameter","rparen"],regex:"(\\\\end)({)(lstlisting)(})",next:"start"},{defaultToken:"text"}]},this.normalizeRules()};r.inherits(a,o),t.LatexHighlightRules=a})),ace.define("ace/mode/folding/latex",[],(function(e,t,n){"use strict";var r=e("../../lib/oop"),o=e("./fold_mode").FoldMode,a=e("../../range").Range,i=e("../../token_iterator").TokenIterator,s={"\\subparagraph":1,"\\paragraph":2,"\\subsubsubsection":3,"\\subsubsection":4,"\\subsection":5,"\\section":6,"\\chapter":7,"\\part":8,"\\begin":9,"\\end":10},u=t.FoldMode=function(){};r.inherits(u,o),function(){this.foldingStartMarker=/^\s*\\(begin)|\s*\\(part|chapter|(?:sub)*(?:section|paragraph))\b|{\s*$/,this.foldingStopMarker=/^\s*\\(end)\b|^\s*}/,this.getFoldWidgetRange=function(e,t,n){var r,o=e.doc.getLine(n);return(r=this.foldingStartMarker.exec(o))?r[1]?this.latexBlock(e,n,r[0].length-1):r[2]?this.latexSection(e,n,r[0].length-1):this.openingBracketBlock(e,"{",n,r.index):(r=this.foldingStopMarker.exec(o))?r[1]?this.latexBlock(e,n,r[0].length-1):this.closingBracketBlock(e,"}",n,r.index+r[0].length):void 0},this.latexBlock=function(e,t,n,r){var o={"\\begin":1,"\\end":-1},s=new i(e,t,n),u=s.getCurrentToken();if(u&&("storage.type"==u.type||"constant.character.escape"==u.type)){var l=o[u.value],c=function(){var e="lparen"==s.stepForward().type?s.stepForward().value:"";return-1===l&&(s.stepBackward(),e&&s.stepBackward()),e},g=[c()],p=-1===l?s.getCurrentTokenColumn():e.getLine(t).length,d=t;for(s.step=-1===l?s.stepBackward:s.stepForward;u=s.step();)if(u&&("storage.type"==u.type||"constant.character.escape"==u.type)){var f=o[u.value];if(f){var h=c();if(f===l)g.unshift(h);else if(g.shift()!==h||!g.length)break}}if(!g.length){if(1==l&&(s.stepBackward(),s.stepBackward()),r)return s.getCurrentTokenRange();t=s.getCurrentTokenRow();return-1===l?new a(t,e.getLine(t).length,d,p):new a(d,p,t,s.getCurrentTokenColumn())}}},this.latexSection=function(e,t,n){var r=new i(e,t,n),o=r.getCurrentToken();if(o&&"storage.type"==o.type){for(var u=s[o.value]||0,l=0,c=t;o=r.stepForward();)if("storage.type"===o.type){var g=s[o.value]||0;if(g>=9){if(l||(c=r.getCurrentTokenRow()-1),(l+=9==g?1:-1)<0)break}else if(g>=u)break}for(l||(c=r.getCurrentTokenRow()-1);c>t&&!/\S/.test(e.getLine(c));)c--;return new a(t,e.getLine(t).length,c,e.getLine(c).length)}}}.call(u.prototype)})),ace.define("ace/mode/behaviour/latex",[],(function(e,t,n){"use strict";var r,o=e("../../lib/oop"),a=e("../behaviour").Behaviour,i=e("../../token_iterator").TokenIterator,s=(e("../../lib/lang"),["text","paren.rparen","punctuation.operator"]),u=["text","paren.rparen","punctuation.operator","comment"],l={},c=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount})),l[t])return r=l[t];r=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},g=function(e,t,n,r){var o=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,o,e.end.column+(o?0:1)]}},p=function(){this.add("braces","insertion",(function(e,t,n,r,o){if(!(n.completer&&n.completer.popup&&n.completer.popup.isOpen)){var a=n.getCursorPosition(),i=r.doc.getLine(a.row);if("\\"!==i[a.column-1])if("{"==o){c(n);var s=n.getSelectionRange(),u=r.doc.getTextRange(s);if(""!==u&&n.getWrapBehavioursEnabled())return g(s,u,"{","}");if(p.isSaneInsertion(n,r))return p.recordAutoInsert(n,r,"}"),{text:"{}",selection:[1,1]}}else if("}"==o){if(c(n),"}"==i.substring(a.column,a.column+1))if(null!==r.$findOpeningBracket("}",{column:a.column+1,row:a.row})&&p.isAutoInsertedClosing(a,i,o))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}})),this.add("braces","deletion",(function(e,t,n,r,o){if(!(n.completer&&n.completer.popup&&n.completer.popup.isOpen)){var a=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==a)if(c(n),"}"==r.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2))return o.end.column++,o}})),this.add("brackets","insertion",(function(e,t,n,r,o){if(!(n.completer&&n.completer.popup&&n.completer.popup.isOpen)){var a=n.getCursorPosition(),i=r.doc.getLine(a.row);if("\\"!==i[a.column-1])if("["==o){c(n);var s=n.getSelectionRange(),u=r.doc.getTextRange(s);if(""!==u&&n.getWrapBehavioursEnabled())return g(s,u,"[","]");if(p.isSaneInsertion(n,r))return p.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){if(c(n),"]"==i.substring(a.column,a.column+1))if(null!==r.$findOpeningBracket("]",{column:a.column+1,row:a.row})&&p.isAutoInsertedClosing(a,i,o))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}})),this.add("brackets","deletion",(function(e,t,n,r,o){if(!(n.completer&&n.completer.popup&&n.completer.popup.isOpen)){var a=r.doc.getTextRange(o);if(!o.isMultiLine()&&"["==a)if(c(n),"]"==r.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2))return o.end.column++,o}})),this.add("dollars","insertion",(function(e,t,n,r,o){var a=n.getCursorPosition(),i=r.doc.getLine(a.row);if("\\"!==i[a.column-1]&&"$"==o){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(o))return;c(n);var s=o,u=n.getSelectionRange(),l=r.doc.getTextRange(u);if(""!==l&&"$"!==l&&n.getWrapBehavioursEnabled())return g(u,l,s,s);if(!l){var p,d=i.substring(a.column-1,a.column),f=i.substring(a.column,a.column+1),h=r.getTokenAt(a.row,a.column),m=r.getTokenAt(a.row,a.column+1),k=h&&/string|escape/.test(h.type),x=!m||/string|escape/.test(m.type);if(f==s)(p=k!==x)&&/string\.end/.test(m.type)&&(p=!1);else{if(k&&!x)return null;if(k&&x)return null;var v=r.$mode.tokenRe;v.lastIndex=0;var w=v.test(d);v.lastIndex=0;var b=v.test(d);if(w||b)return null;if(f&&!/[\s;,.})\]\\]/.test(f))return null;p=!0}return{text:p?s+s:"",selection:[1,1]}}}})),this.add("dollars","deletion",(function(e,t,n,r,o){var a=r.doc.getTextRange(o);if(!o.isMultiLine()&&"$"==a&&(c(n),r.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==a))return o.end.column++,o}))};p.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new i(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",s)){var o=new i(t,n.row,n.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",s))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",u)},p.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},p.recordAutoInsert=function(e,t,n){var o=e.getCursorPosition(),a=t.doc.getLine(o.row);this.isAutoInsertedClosing(o,a,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=o.row,r.autoInsertedLineEnd=n+a.substr(o.column),r.autoInsertedBrackets++},p.isAutoInsertedClosing=function(e,t,n){return r.autoInsertedBrackets>0&&e.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&t.substr(e.column)===r.autoInsertedLineEnd},p.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},o.inherits(p,a),t.LatexBehaviour=p})),ace.define("ace/mode/latex",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),o=e("./text").Mode,a=e("./latex_highlight_rules").LatexHighlightRules,i=e("./folding/latex").FoldMode,s=e("../range").Range,u=e("ace/worker/worker_client").WorkerClient,l=e("./behaviour/latex").LatexBehaviour,c=function(e){var t=e.getDocument(),n=e.getSelection(),r=n.lead,o={},a=[],i=[],l=null,c=!1,g=!0,p=new u(["ace"],"ace/mode/latex_worker","LatexWorker");p.attachToDocument(t);var d=t.on("change",(function(){c=!0,l&&(clearTimeout(l),l=null)})),f=n.on("changeCursor",(function(){c||(l=setTimeout((function(){h({cursorMoveOnly:!0}),a=[],l=null}),100))})),h=function(u){u||(u={});var l=u.cursorMoveOnly,c=[],p={},d=n.getCursor(),f=e.getLength()-1,h=f>0?e.getLine(f).length:0,m=d.row==f&&d.column===h;a=[];for(var k=0,x=i.length;k<x;k++){var v=i[k],w=0,b=new s(v.start_row,v.start_col,v.end_row,v.end_col),y=b.insideEnd(d.row,d.column),I=b.isStart(d.row,d.column-1),C=b.isEnd(d.row,d.column);if(v.suppressIfEditing&&(I||C))a.push(b),v.suppressed||w++,v.suppressed=!0;else{for(var T=!1,L=0,R=a.length;L<R;L++){if(a[L].intersects(b)){T=!0;break}}if(T)v.suppressed||w++,v.suppressed=!0;else if(v.suppressed&&w++,v.suppressed=!1,c.push(v),"info"!==v.type){var B=b.toString()+(y?"+cursor":"");p[B]={hint:v,cursorInRange:y,range:b}}}}for(B in p)if(!o[B]){var S=p[B].range;y=p[B].cursorInRange;var A=(v=p[B].hint).row===v.start_row&&v.column===v.start_col,$=y&&A&&!m,_=y&&!A&&!m?r:t.createAnchor(S.start),M=$?r:t.createAnchor(S.end),E=new s;E.start=_,E.end=M;var O="ace_error-marker";"warning"===v.type&&(O="ace_highlight-marker"),E.id=e.addMarker(E,O,"text"),o[B]=E}for(B in o)p[B]||((E=o[B]).start!==r&&E.start.detach(),E.end!==r&&E.end.detach(),e.removeMarker(E.id),delete o[B]);if(!l||w)if(g){if(c.length>0){var F=e.getAnnotations();e.setAnnotations(F.concat(c))}g=!1}else e.setAnnotations(c)};return p.on("lint",(function(e){c&&(c=!1),(i=e.data.errors).length>100&&(i=i.slice(0,100)),h()})),p.on("terminate",(function(){for(var s in l&&(clearTimeout(l),l=null),t.off("change",d),n.off("changeCursor",f),o){var u=o[s];u.start!==r&&u.start.detach(),u.end!==r&&u.end.detach(),e.removeMarker(u.id)}o={},i=[],a=[],e.clearAnnotations()})),p},g=function(){this.HighlightRules=a,this.foldingRules=new i,this.$behaviour=new l,this.createWorker=c};r.inherits(g,o),function(){this.type="text",this.lineCommentStart="%",this.$id="ace/mode/latex"}.call(g.prototype),t.Mode=g})),ace.require(["ace/mode/latex"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}));